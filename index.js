const { Client, LocalAuth } = require('whatsapp-web.js');
const qrcode = require('qrcode-terminal');

const client = new Client({
    authStrategy: new LocalAuth()
});

client.on('qr', (qr) => {
    qrcode.generate(qr, { small: true });
});

client.on('ready', () => {
    console.log('WhatsApp bot is ready!');
});

client.on('message', async message => {
    const msg = message.body.trim().toLowerCase();

    if (['0','٠', 'القائمه', 'القائمة', 'قائمة', 'قائمه', 'الرئيسيه', 'الرئيسية', 'رجوع', 'عودة'].includes(msg)) {
        await message.reply(
           ' مرحبًا بك في دليل التوعية بالسلامة والصحة المهنية. اختر من القائمة التالية:\n\n 1. التعريف بالسلامة والصحة المهنية\n 2. سياسة السلامة والصحة المهنية بالشركة\n 3. قواعد الحفاظ على الحياة \n 4. القيادة الآمنة\n 5. المخاطر في بيئة العمل \n 6. إصابات العمل\n 7. خطة الطوارئ والإخلاء\n 8. الحادث الوشيك والإبلاغ عنه\n 9. التواصل مع مسئولي السلامة.\n\nاكتب رقم من القائمة السابقة لعرض التفاصيل الخاصة باختيارك \n\n أو اكتب كلمة مفتاحية مثل "السلامة"، أو "التواصل" أو "حادث وشيك"  .'
        );
    } else if (['1','١', 'السلامه', 'السلامة', 'سلامه', 'سلامة'].includes(msg)) {
        await message.reply(
          ' السلامة والصحة المهنية هي علم يهتم بالحفاظ على سلامة وصحة الإنسان في مواقع العمل، من خلال الوقاية من الحوادث والإصابات والأمراض المهنية. وتهدف إلى:\n - تقليل المخاطر في بيئة العمل.\n - حماية العاملين من الحوادث والإصابات.\n - تعزيز بيئة عمل صحية وآمنة.\n - ضمان استمرارية العمل وتقليل التوقفات.\n وتدخل السلامة والصحة المهنية في كل مجالات الحياة:\n فعند استخدام الكهرباء أو الأجهزة المنزلية أو عند قيادة السيارات، بل حتى عند السير في الشوارع، نحتاج إلى إتباع قواعد وأصول السلامة.\n وبالطبع داخل المصانع، وأماكن العمل المختلفة، والمنشآت التعليمية والإدارية، نكون بحاجة إلى تطبيق إرشادات السلامة والصحة المهنية.\n\n لماذا نهتم بها؟  \n لأن حماية الإنسان هي أولوية، ولكي نحقق كفاءة إنتاجية عالية دون خسائر بشرية أو مادية.\n\n تذكير: \n للعودة إلى القائمة الرئيسية، أرسل: 0 أو كلمة القائمة.'
        );
    } else if (['2','٢', 'السياسه', 'السياسة', 'سياسه', 'سياسة'].includes(msg)) {
        await message.reply(
           ' سياسة السلامة والصحة المهنية بالشركة:\n\n تشترط تشريعات السلامة والصحة المهنية والبيئة (HSE) أن يكون لدى كل جهة عمل برنامج لإدارة المخاطر، وتعكس سياسة السلامة والصحة المهنية المكتوبة التزام الشركة بهذا الجانب وتساعد في تنفيذ البرنامج بشكل فعال.\n\n يجب مراجعة هذه السياسة وتحديثها باستمرار، ويوقع عليها رئيس مجلس الإدارة تأكيدًا على الالتزام الرسمي بها.\n تنقسم السياسات المعتمدة في شركتنا إلى ما يلي:\n\n 1. السياسة العامة للسلامة والصحة المهنية وحماية البيئة:\n توضح التزامات الشركة تجاه العاملين وبيئة العمل وفقًا للقوانين المصرية، مع إعداد خطط طوارئ، وتقييم للمخاطر، وتدريب الموظفين، ومتابعة تنفيذ الاشتراطات من المقاولين\n\n 2. سياسة التدخين:\n  منع التدخين تمامًا داخل جميع مواقع الشركة، مع تحديد المسئوليات وآليات المتابعة من قبل مسئولي السلامة.\n\n 3. السياسة البيئية:\n  تلتزم الشركة بالحفاظ على البيئة من خلال الالتزام بالقوانين المحلية والدولية، وتطوير العمليات التشغيلية بما يحقق الاستدامة البيئية.\n\n 4. سياسة القيادة الآمنة:\n  تشمل حماية العاملين خلال قيادة المركبات سواء أثناء التنقل الوظيفي أو الشخصي، مع توجيهات ملزمة لقائدي المركبات.\n\n 5. سياسة التعامل مع الأوبئة وفيروس كورونا:\n  توفر الشركة أدوات الوقاية وتطبق الإجراءات الاحترازية لحماية العاملين.\n\n 6. سياسة مجابهة المخدرات والكحوليات:\n منع تام لتعاطي أي مواد مخدرة أو كحولية، مع توقيع الجزاءات على المخالفين حفاظًا على سلامة الجميع.\n\n للعودة إلى القائمة الرئيسية، أرسل: 0 أو كلمة القائمة.'
        );
    } else if (['3','٣', 'قواعد', 'الحياه', 'الحياة', 'لايف', 'life', 'life saving'].some(w => msg.includes(w))) {
        await message.reply(
           ' قواعد الحفاظ على الحياة.\n\n تلتزم شركتنا بتطبيق كافة معايير واشتراطات السلامة والصحة المهنية، والتي تدعو إلى الالتزام بـ 9 قواعد أساسية للحفاظ على الحياة، يجب على جميع العاملين اتباعها لتوفير أعلى حماية بالمقرات الإدارية والمستودعات وأثناء القيادة.\n\n 1. عدم تجاوز ضوابط السلامة\n لا تتجاوز أو تعطل أي وسيلة أمان دون تصريح، خاصة في الأعمال الكهربائية أو الميكانيكية أو عند نقل وتركيب المعدات. استخدم أدوات مناسبة لطبيعة العمل فقط.\n\n 2. القيادة الآمنة\n اربط الحزام دائمًا، لا تتجاوز السرعة، لا تستخدم الهاتف أثناء القيادة، تأكد من جاهزية السيارة وخذ قسطًا كافيًا من الراحة. التزم بخطة الرحلة.\n\n 3. تجنب المناطق الخطرة (خط النار)\n ابتعد عن الأجسام المتحركة أو الخطرة، لا تمر بجوار السقالات أو المواد المتساقطة، وأبلغ فورًا عن أي خطر حتى لو كان محتملًا.\n\n 4. عزل مصادر الطاقة\n افصل مصادر الطاقة الكهربائية أو الميكانيكية قبل البدء في أي صيانة أو تركيب، واستخدم الأقفال التحذيرية. لا تبدأ العمل قبل التنسيق مع مسئول السلامة.\n\n 5. تصريح الأعمال\n لا تبدأ أي عمل صيانة أو تركيب أو عمل على ارتفاعات إلا بعد استخراج تصريح العمل المناسب (بارد أو ساخن) وتوفير جميع وسائل الأمان المطلوبة.\n\n 6. العمل على ارتفاعات\n استخدم وسائل الحماية الشخصية والسلالم والسقالات الآمنة. لا تستخدم الكراسي أو المكاتب كبديل، وثبّت الأدوات وتأكد من فحصها قبل الاستخدام.\n\n 7. الأماكن المحصورة (المغلقة)\n لا تدخل أي مكان مغلق دون تصريح مسبق، تأكد من التهوية وقياس الغازات، واستخدم معدات الوقاية وأجهزة التنفس عند الحاجة، مع وجود مراقب دائم وخطة إنقاذ واضحة.\n\n 8. الرفع الميكانيكي الآمن\n لا تُستخدم الروافع إلا بعد التأكد من صلاحيتها، وبواسطة شخص مؤهل فقط. لا تمر تحت الأحمال المعلقة، وأبلغ عن أي تجاوزات أو مخاطر.\n\n 9. الأعمال الساخنة\n يُمنع تنفيذ أي عمل ينتج عنه شرر أو لهب بدون تصريح مسبق. يجب عزل المواد القابلة للاشتعال واختبار الغازات ومراقبة بيئة العمل بشكل مستمر.\n\n للعودة إلى القائمة الرئيسية، أرسل: 0 أو كلمة القائمة.'
        );
    } else if (['4','٤', 'القياده', 'القيادة', 'سياقه', 'سياقة', 'قيادة', 'قياده'].includes(msg)) {
        await message.reply(
          ' القيادة الآمنة\n\n في إطار حرص الشركة على سلامة العاملين، نؤكد على أهمية القيادة الآمنة، خصوصًا أثناء التنقل بين المقرات أو أداء المهام الرسمية. وتُعد القيادة الآمنة من أساسيات الحفاظ على الحياة، وتشمل الالتزام بالتالي:\n\n- الالتزام الكامل بقوانين المرور وتعليمات القيادة على الطرق.\n- استخدام حزام الأمان بشكل دائم أثناء القيادة.\n- عدم استخدام الهاتف المحمول أثناء القيادة إلا عبر السماعات أو الوسائل الآمنة.\n- الالتزام بالسرعات المقررة وتجنب السرعة الزائدة.\n- التأكد من سلامة المركبة قبل التحرك بها، وخاصة الفرامل والإطارات والإضاءة.\n- التوقف الفوري عند الشعور بأي عطل فني في المركبة وعدم المجازفة بالاستمرار في القيادة.\n- القيادة بحذر في الأحوال الجوية السيئة (مثل الأمطار أو الشبورة أو الرياح الشديدة).\n- تجنب القيادة عند الشعور بالإرهاق أو النعاس.\n- القيادة الآمنة مسؤولية شخصية، لكنها أيضًا مسؤولية جماعية نتحملها جميعًا لحماية أنفسنا وزملائنا من أي مخاطر على الطريق.\n\n للعودة إلى القائمة الرئيسية، أرسل: 0 أو كلمة القائمة.'
        );
    } else if (['5','٥', 'المخاطر', 'مخاطر', 'المكتب', 'المكاتب', 'الاداريه', 'الإدارية', 'المخاطر في المكاتب'].some(w => msg.includes(w))) {
        await message.reply(
          ' المخاطر في بيئة العمل \n\n يتعرض العاملون في بيئة المكاتب الإدارية لعدة أنواع من المخاطر التي يجب الوعي بها لتفادي الحوادث وضمان بيئة عمل آمنة. وتنقسم المخاطر إلى الفئات التالية:\n\n  1. المخاطر الميكانيكية:\n- التعثر نتيجة توزيع غير منظم للأسلاك أو الأجهزة أو صناديق التخزين.\n- السقوط بسبب استخدام كراسي غير مناسبة أو غير ثابتة للوصول إلى ارتفاعات.\n- الاصطدام بالأدراج المفتوحة أو الأبواب الزجاجية غير المميزة.\n\n  2. المخاطر الكهربية:\n- استخدام توصيلات كهربائية متعددة (مشتركات) بشكل عشوائي أو فوق طاقتها.\n- توصيل الأجهزة بأسلاك تالفة أو مكشوفة.\n- استخدام الغلايات الكهربائية (الكاتيل) لما قد تسببه من ارتفاع حرارة الأسلاك أو حدوث تماس كهربائي. ( ممنوع نهائياً استخدامها داخل أماكن العمل)\n- عدم إغلاق الأجهزة عند نهاية ساعات العمل.\n\n  3. المخاطر الفيزيائية:\n- الانزلاق نتيجة أرضيات مبللة أو استخدام مواد تنظيف دون تحذير.\n- الضوضاء الناتجة عن أعمال صيانة داخل المبنى أو استخدام آلات طباعة عالية الصوت.\n- ضعف الإضاءة في بعض المكاتب أو الممرات.\n- سوء التهوية الناتج عن عدم تجديد الهواء أو تشغيل التكييفات لفترات طويلة دون تهوية طبيعية.\n\n  4. المخاطر الكيميائية:\n- استنشاق أبخرة ناتجة عن استخدام مواد تنظيف قوية دون تهوية كافية.\n- ملامسة البشرة للمواد الكيميائية دون ارتداء قفازات عند الحاجة.\n- تخزين عبوات المنظفات أو أحبار ماكينات الطباعة في أماكن مغلقة دون تحذير.\n\n  5. المخاطر الناتجة عن الأجهزة المكتبية:\n • الجلوس لفترات طويلة أمام الشاشات بدون استراحة.\n • استخدام كراسي غير مناسبة أو غير قابلة للتعديل.\n • الجلوس في وضعيات خاطئة تؤدي لإجهاد عضلي أو آلام في الرقبة والظهر.\n • استخدام الفأرة أو لوحة المفاتيح بشكل مفرط دون وضعيات مريحة.\n- رفع أو تحريك أجهزة ثقيلة مثل الشاشات أو ماكينات التصوير دون مساعدة.\n\n  6. المخاطر البيولوجية:\n- انتقال الفيروسات المعدية بسبب غياب النظافة الشخصية أو التلامس مع أسطح ملوثة.\n- انتشار العدوى نتيجة سوء التهوية أو عدم تنظيف فلاتر التكييفات بإنتظام.\n- تواجد حشرات أو قوارض بسبب بقايا الطعام أو سوء التخزين.\n- تراكم الأتربة داخل المكاتب أو تكييفات غير نظيفة قد تساهم في انتشار الجراثيم.\n\n للعودة إلى القائمة الرئيسية، أرسل: 0 أو كلمة القائمة.'
        );
    } else if (['6','٦', 'الاصابات', 'الإصابات', 'اصابات', 'إصابات', 'اصابه', 'إصابة', 'العمل'].some(w => msg.includes(w))) {
        await message.reply(
          ' إصابات العمل\n\n اصابة العمل هي إصابة مفاجأة وغير متوقعة تحدث نتيجة عوامل خارجية في مكان العمل ، والتي يعاني خلالها أحد الموظفين من الإصابة سواءً في مكان العمل ، أو خلال ذهابه أو عودته من مكان العمل ، أو أثناء قيامه بمأمورية عمل ، أو قيامه بمهمة للعمل .\n\n حالات اصابة العمل طبقاً لقانون العمل رقم 12 لسنة 2003\n\n  - الإصابة بأحد الأمراض المهنية المُدرجة بالجدول رقم (1) المرفق بقانون التأمينات الإجتماعية رقم 148 لسنة 2019\n\n  - الإصابة نتيجة حادث وقع اثناء تأدية العمل أو بسببه \n\n  - الإصابة الناتجة عن الإجهاد و الإرهاق من العمل ( و لها شروط و قواعد خاصة ) \n\n  - الإصابة الناتجة عن حادث يقع للعامل خلال فترة ذهابه للعمل أو العودة منه بالطريق المعتاد بدون توقف أو إنحراف \n\n  - عند حدوث إصابة العمل يراعى الآتى :-\n\n   - يقوم المصاب بإبلاغ رئيسه المباشر فور وقوع الإصابة و يتم استيفاء نموذج بيانات عن وقوع الإصابة و يُعتمد من رئيسه المباشر \n  - يتم تقديم مذكرة من السيد / مدير المنطقة أو المستودع توضح سبب حدوث الحادث او الإصابة موضحاً وصف مختصر للحادث \n  - يتم إبلاغ مسئول السلامة و الصحة المهنية بالمنطقة أو المستودع فور وقوع الإصابة ، و الذى يقوم بتحرير محضر ادارى بالحالة ، و يتم اخطار الإدارة العامة للسلامة و الصحة المهنية بالإصابة تليفونياً أو بالفاكس الى أن ان يتم استيفاء باقى المستندات \n  - يقوم المصاب بتحرير محضر شرطة فى قسم الشرطة التابع له مكان وقوع الإصابة ، و يتم نسخ عدد (2) صورة طبق الأصل من محضر الشرطة خلال 24 ساعة فقط من وقوع الإصابة \n  - اذا تعذر على المصاب نسخ المحضر ، فيقوم مدير المنطقة او المستودع بعمل تفويض لمندوب الشئون القانونية بالمنطقة او المستودع لنسخ المحضر \n  - على المصاب احضار اصل التقرير الطبى الأولى من الجهة التى توجه اليها المصاب \n  - يتم توجيه المصاب للعلاج داخل احد المستشفيات أو العيادات المتعاقد معها الشركة \n  - يراعى مراجعة محل اقامة المصاب طبقاً لما هو موجود فى ملف خدمته بالشركة فى حالة الإصابة بالطريق اثناء الذهاب و الإياب من العمل \n  - يتم استيفاء باقى مستندات الإصابة و موافاة الإدارة الامة للسلامة و الصحة المهنية خلال 72 ساعة على الأكثر \n  - فى حالة الإصابة بموقع العمل أو أثناء التكليف بمأمورية فيلزم احضار صورة طبق الأصل من خط سير المصاب لليوم السابق للحادث و يوم الحادث و اليوم التالى للحادث معتمد و مختوم \n  - فى حالة الإصابة اثناء التكليف بمأمورية يلزم احضار اصل المأمورية او صورة طبق الأصل منها مستوفاة و معتمدة من المدير المختص و مختومة بختم المنطقة او المستودع \n  - احضار صورة طبق الأصل من الحضور و الإنصراف للعمل لليوم السابق للحادث و يوم الحادث و اليوم التالى للحادث معتمد و مختوم.\n\n للعودة إلى القائمة الرئيسية، أرسل: 0 أو كلمة القائمة.'
        );
    } else if (['7','٧', 'الطوارئ', 'الطوارى', 'الإخلاء', 'اخلاء', 'خطة الطوارئ','خطة', 'خطة الاخلاء'].some(w => msg.includes(w))) {
        await message.reply(
          ' خطة الطوارئ والإخلاء\n\n خطة الإخلاء فى حالات الطوارىء هى خطة مُعدة مُسبقاً للمحاكاة و التدريب على كيفية التصرف الصحيح أثناء حدوث أى حالة طارئة ، و يتم الإستعانة ببعض العاملين للتدريب و المشاركة فى تنفيذ خطة الطوارىء من خلال الفرق و الجماعات التى يتم تحديدها و تدريبها من خلال التنفيذ الفعلى لخطط الطوارىء الوهمية بمشاركة جميع العاملين.\n\n تعليمات الإخلاء :\n عند سماع صافرة الإنذار، أو تلقي تعليمات إخلاء المبنى استجابة لحالة طارئة ، يجب أن :\n 1- لا تصاب بالذعر.\n 2- لا تتجاهل صافرة الإنذار.\n 3-  تنفذ تعليمات مشرفي الإنقاذ  بدقة.\n 4- تغادر المبنى فوراً بنظام عبر أقرب مسار مخصص للإخلاء.\n 5- تغلق الأبواب عند خروجك.\n 6- تغلق جميع الأجهزة الكهربائية إن كان الوضع يسمح بذلك.\n 7- لا تستخدم المصعد.\n 8- لا تعود إلى مكتبك/مكان عملك مهما كانت الأسباب.\n 9-  تتوجه إلى النقطة المخصصة للتجمع ، وإن كانت نقطة/منطقة التجمع غير آمنة أو مغلقة نتيجة لحالة الطوارئ فتوجه إلى نقطة التجمع البديلة.\n 10- تبلغ مشرف الإنقاذ الذي تتبع له بوجودك في نقطة التجمع.\n 11-  لا تعود إلى المبنى إلا إذا صدر عن مسؤولي الطوارئ أو مدير العمل ما يفيد بأن الوضع قد أصبح آمناً.\n 12- إنّ توقف صافرة الإنذار لا يعني أن الحالة الطارئة قد انتهت.\n\n  ملاحظات ومحاذير :\n لا تحاول إطفاء الحرائق  إلا إذا كنت مدرباً على استخدام آلة الإطفاء ، لكن يجب أن تبقى دائماً مستعداً للإخلاء.\n ينبغي إبلاغ مسئول السلامة و الصحة المهنية بجميع حوادث الحريق ، بما فيها الحرائق التي تمّ إطفاؤها .\n لا تدخل أي غرفة إن كانت مليئة بالدخان ، أو إن كان بابها أومقبض الباب ساخن الملمس.\n\n  تذكر هذه الكلمات الأربع التي تبدأ بحرف الألف :\n\n - أبعد الأشخاص عن مصدر الخطر المباشر.  \n\n - أنذر. أطلق صافرة الإنذار واتصل بالدفاع المدني .  \n\n - احصر الحريق والدخان. أغلق الأبواب والنوافذ شريطة أن لا تعرض سلامتك للخطر.  \n\n - أخلِ. غادر فوراً إلى منطقة التجمع.\n\n للعودة إلى القائمة الرئيسية، أرسل: 0 أو كلمة القائمة.'
        );
    } else if (['8','٨', 'الحادث', 'الوشيك', 'الوشيكه', 'near miss', 'حادث وشيك'].some(w => msg.includes(w))) {
        await message.reply(
           ' الحادث الوشيك (Near Miss):\n\n هو حادث وقع ولم يؤدِّ إلى إحداث أي ضرر صحي أو جسدي أو أي ضرر للمنشأة، ولكن كان من الممكن أن يؤدي إلى ضرر أو إصابة في ظروف مختلفة، ولا يزال يشكل خطورة كامنة وشيكة الحدوث.\n\n أمثلة على الحوادث الوشيكة الحدوث:\n 1. سقوط أو تطاير أي جسم وكاد أن يصيب أحد العاملين ولم يتسبب في أضرار مالية ظاهرة (قد تحدث بعض الخسائر البسيطة يمكن تجاهلها).\n 2. تعثر العامل لأي سبب وكان السبب ظاهرًا مثل نتوء في الأرضية، أو بروز، أو كسر في البلاط، أو أسلاك، أو مواسير، أو أرضية زلقة... إلخ.\n 3. وقوع العامل من ارتفاع دون أن يتسبب ذلك في أي ضرر أو إصابة.\n 4. تعرض العامل للانزلاق من على درجات السلم نتيجة عيوب فيها.\n 5. حدوث ماس كهربائي في الأسلاك دون أن ينتج عنه أضرار.\n 6. سقوط مروحة سقف أو مروحة حائط دون إصابات.\n ويوجد العديد من الأمثلة الأخرى، ولكن يبقى التمييز الأساسي كما يلي:\n\n  الحادث الوشيك: حادثة تحدث ولا ينتج عنها إصابات أو خسائر مادية مؤثرة.\n \n الحادث: حادثة تحدث وينتج عنها إصابة للأفراد أو خسائر مادية أو كلاهما معًا.\n \n الإبلاغ عن الحادث الوشيك:\n يساعد الإبلاغ عن الحوادث الوشيكة إدارة السلامة والصحة المهنية على:\n تجنب مصادر الخطر قبل أن تسبب أضرارًا فعلية.\n تعزيز ثقافة السلامة لدى العاملين.\n تحسين بيئة العمل وجعلها أكثر أمانًا.\n لذا، يُرجى من جميع العاملين:\n الإبلاغ فورًا عند ملاحظة حادث وشيك.\n توضيح التفاصيل لمشرفهم أو لمسؤول السلامة.\n عدم تجاهل أي موقف يُحتمل أن يسبب ضررًا لاحقًا.\n\n للعودة إلى القائمة الرئيسية، أرسل: 0 أو كلمة القائمة.'
        );
    } else if (['9', '٩','التواصل','تواصل', 'مسئول', 'مسؤول', 'شكاوى', 'مقترحات'].some(w => msg.includes(w))) {
        await message.reply(
           ' **للتواصل مع مسئولي السلامة:**\n\n(1) اتصل بالأرقام الموجودة في لوحة الإعلانات.\n\n في حالات الطوارئ اتصل على الأرقام التالية: \n- الإسعاف: 123\n- المطافئ: 180\n- النجدة: 122\n\n    (2) يمكنك كتابة شكواك أو اقتراحك مباشرة هنا.\n  سيتم حفظها في سجل خاص ومراجعتها دوريًا.\n(الاسم ورقم الهاتف اختياريان)\n\n  ستتلقى رسالة تأكيد باستلام رسالتك.'
        );
    } else {
        await message.reply(
           ' مرحبًا بك في دليل السلامة والصحة المهنية.\n\n  هذا البوت مخصص لمساعدتك في التعرف على قواعد وإرشادات السلامة في بيئة العمل \n\n للقائمة الرئيسية، أرسل: 0 أو كلمة "القائمة"  '
        );
    }
});

client.initialize();